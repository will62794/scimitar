INIT Init
\* INIT InitTestInv
NEXT Next
CONSTANTS
    n1 = n1
    n2 = n2
    n3 = n3
    v1 = v1
    Server = {n1, n2, n3, n4, n5}
    Follower = Follower
    Candidate = Candidate
    Leader = Leader
    Nil = Nil
    RequestVoteRequest = RequestVoteRequest
    RequestVoteResponse = RequestVoteResponse
    AppendEntriesRequest = AppendEntriesRequest
    AppendEntriesResponse = AppendEntriesResponse
    EqualTerm = EqualTerm
    LessOrEqualTerm = LessOrEqualTerm
    MaxTerm = 3
    MaxLogLen = 2
    MaxMsgCount = 1000
    \* MaxMsgCount = 5
    n1 = n1
    n2 = n2
    n3 = n3

CONSTRAINT StateConstraint
SYMMETRY MCSymmetry

\* INVARIANT LInv14291_dcfd
\* INVARIANT H_LogEntryInTermImpliesSafeAtTerm

\* INVARIANT LInv14291_dcfd

INVARIANT LInv2632_8856

\* INVARIANT Bait

\* INVARIANT LInv8593_cc74_R0_0_I2

\* INVARIANT LInv15393_a97d

\* INVARIANT LInv12078_d36b

\* INVARIANT AInv14147_a1a3_R2_1_I2
\* INVARIANT H_LogEntryInTermImpliesSafeAtTerm
\* INVARIANT H_QuorumsSafeAtTerms
\* INVARIANT LInv800


\* INVARIANT  AInv3142_8bb8_R0_0_I2
\* INVARIANT  AInv13663_d744_R0_0_I2


\* INVARIANT AInv3578_8bb8
\* INVARIANT AInv1965_6443
\* INVARIANT AInv3072
\* INVARIANT AInv199

\* INVARIANT AInv3784_8bb8_R0_0_I2
\* INVARIANT AInv1965_6443_R0_0_I2

\* INVARIANT AInv7383

\* INVARIANT AInv7658

\* INVARIANT AInv3784

\* INVARIANT AInv3796

\* INVARIANT LInv800

\* INVARIANT AInv489_e3b5
\* INVARIANT AInv5548_8465_R7_0_I2


\* INVARIANT  AInv5217_d36b_R0_0_I2
\* INVARIANT  AInv9130_bcfb_R1_0_I2
\* INVARIANT  AInv8_404d_R1_1_I1
\* INVARIANT  AInv8061_404d_R2_0_I2
\* INVARIANT  AInv9334_a1a3_R2_1_I2
\* INVARIANT  AInv2_8e53_R4_0_I0
\* INVARIANT  AInv65_5994_R4_1_I1
\* INVARIANT  AInv35_1e2e_R5_1_I1
\* INVARIANT  AInv2_42ac_R6_0_I0
\* INVARIANT  AInv10_2c32_R6_1_I1
\* INVARIANT  AInv2_82b3_R9_0_I0
\* INVARIANT  AInv7_f533_R9_1_I0
\* INVARIANT  AInv3_6443_R11_0_I2
\* INVARIANT  AInv489_e3b5_R11_0_I2

\* INVARIANT AInv3326_8bb8

\* INVARIANT AInv46962_e055_R2_1_I2

\* INVARIANT H_NoLogDivergence \* (SAFETY)



\* INVARIANT AInv63_bf9f_R0_0_I2
\* INVARIANT AInv1646_f408_R0_0_I2
\* INVARIANT AInv6602_a71c_R0_0_I2
\* INVARIANT AInv1685_404d_R0_0_I2
\* INVARIANT AInv9737_e8d2_R0_0_I2

\* INVARIANT AInv7_2c32_R3_0_I2
\* INVARIANT AInv1646_f408
\* INVARIANT AInv22294_f055_R0_0_I2
\* INVARIANT AInv30505_a1a3

\* INVARIANT AInv67_bf9f_R0_0_I2
\* INVARIANT AInv1859_f408_R0_0_I2
\* INVARIANT AInv8798_9532_R0_0_I2
\* INVARIANT AInv1902_404d_R0_0_I2
\* INVARIANT AInv2099_bca2_R0_0_I2



\* INVARIANT Test1
\* INVARIANT H_CommitIndexBoundValid
\* INVARIANT AInv6278_d2f4_R3_1_I2

\* INVARIANT AInv6959_22b6_R0_0_I2
\* INVARIANT AInv17061_6a6e_R3_0_I2
\* INVARIANT H_VoteQuorumLogTerms
\* INVARIANT AInv6948_22b6_R0_0_I2
\* INVARIANT AInv6858_3e34_R7_1_I3




\* INVARIANT H_Inv20_R0_0_I1
\* INVARIANT H_Inv21_R1_0_I1
\* INVARIANT H_Inv1680_R1_1_I1
\* INVARIANT H_Inv2516_R1_1_I1
\* INVARIANT H_Inv29138_R5_0_I3
\* INVARIANT H_SuccessfulRequestVoteQuorumInTermImpliesNoLogsInTerm

\* INVARIANT H_Inv23832

\* INVARIANT H_OnePrimaryPerTerm

\* INVARIANT N_Inv30_R0_0_I0
\* INVARIANT N_Inv18_R0_1_I1
\* INVARIANT N_Inv2710_R0_1_I1
\* INVARIANT N_Inv20_R0_1_I1
\* INVARIANT N_Inv14_R1_1_I1


\* INVARIANT H_CandidateWithVotesGrantedInTermImplyNoOtherLeader


\* INVARIANT F_Inv1375_R0_0_I2
\* INVARIANT F_Inv1664_R0_0_I2
\* INVARIANT F_Inv11664_R0_0_I2
\* INVARIANT F_Inv665_R0_0_I2
\* INVARIANT F_Inv1536_R0_0_I2
\* INVARIANT F_Inv17_R0_1_I2
\* INVARIANT F_Inv19_R0_1_I2
\* INVARIANT F_Inv14132_R0_1_I2
\* INVARIANT F_Inv8783_R0_1_I2
\* INVARIANT F_Inv123_R1_0_I1
\* INVARIANT F_Inv3_R1_0_I1
\* INVARIANT F_Inv10_R6_0_I0
\* INVARIANT F_Inv173_R10_0_I1
\* INVARIANT F_Inv5_R10_0_I1
\* INVARIANT F_Inv13_R11_0_I2
\* INVARIANT F_Inv349_R11_0_I2
\* INVARIANT F_Inv14784_R11_0_I2
\* INVARIANT F_Inv293_R11_0_I2
\* INVARIANT F_Inv430_R11_0_I2
\* INVARIANT F_Inv429_R11_0_I2
\* INVARIANT F_Inv4_R12_0_I0
\* INVARIANT F_Inv2430_R20_0_I2
\* INVARIANT F_Inv6299_R20_0_I2

\* INVARIANT L_Inv16249_R3_0_I3
\* INVARIANT L_Inv1494_R3_0_I3
\* INVARIANT H_Inv10677_R1_1_I2
\* INVARIANT Inv10853_R3_0_I3

\* INVARIANT H_Inv7_R1_0_I0
\* INVARIANT H_Inv0_R1_1_I0

\* INVARIANT H_Inv3556_R0_1_I1

\* INVARIANT L_Inv910
\* INVARIANT L_Inv18
\* INVARIANT L_Inv2962


\* INVARIANT H_Inv1467
\* INVARIANT H_Inv1960
\* INVARIANT H_Inv17709_R1_1_I2

\* INVARIANT H1_Inv14939_R0_0_I2
\* INVARIANT H1_Inv10950_R1_0_I2
\* INVARIANT H1_Inv776_R1_1_I1
\* INVARIANT H1_Inv10_R2_1_I1
\* INVARIANT H1_Inv1_R3_0_I1
\* INVARIANT H1_Inv5_R4_0_I0
\* INVARIANT H1_Inv145_R5_0_I1
\* INVARIANT H_Inv17456_R0_0_I2

\* INVARIANT L_Inv1494_R3_0_I3


\* INVARIANT C_Inv18064_R0_0_I2
\* INVARIANT C_Inv9598_R1_0_I2
\* INVARIANT C_Inv319_R1_1_I1
\* INVARIANT C_Inv1554_R1_1_I1
\* INVARIANT C_Inv226_R1_1_I1
\* INVARIANT C_Inv112_R2_0_I1
\* INVARIANT C_Inv10_R2_1_I1
\* INVARIANT C_Inv214_R6_0_I1
\* INVARIANT C_Inv300_R6_0_I1
\* INVARIANT C_Inv297_R6_0_I1
\* INVARIANT C_Inv11_R6_0_I1
\* INVARIANT C_Inv7_R6_1_I1
\* INVARIANT C_Inv6_R6_2_I0
\* INVARIANT C_Inv4_R10_0_I0
\* INVARIANT C_Inv1_R12_0_I1
\* INVARIANT C_Inv10_R15_0_I1

\* VIEW view
\* SYMMETRY Symmetry
\* INVARIANT TypeOK

\* PROPERTY
\* Uncomment the previous line and add property names

\* INVARIANT H_Inv598_R0_0_I2
\* INVARIANT Inv2209_R1_0_I2
\* INVARIANT Inv3504_R1_1_I3


INVARIANT
    \* Inv14_R0_0_I1_0
    \* Inv454_R0_0_I2_1
    \* H_RequestVoteResponseMsgsInTermUnique
    \* H_LeaderMatchIndexValidAppendEntries
    \* H_AppendEntriesRequestLogEntriesMustBeInLeaderLog
    \* H_RequestVoteQuorumInTermImpliesNoAppendEntriesInTerm
    \* H_CandidateInTermVotedForItself
    \* H_AppendEntriesResponseInTermImpliesSafeAtTerms
    \* H_VotesCantBeGrantedTwiceToCandidatesInSameTerm
    \* H_VoteGrantedImpliesVoteResponseMsgConsistent
    \* H_LeaderHasVotesGrantedQuorum
    \* H_VoteGrantedImpliesNodeSafeAtTerm
    \* TestInv
    \* TestInv2
    \* H_OnePrimaryPerTerm
    \* H_CandidateWithVotesGrantedInTermImplyNoOtherLeader
    \* H_LogTermsMonotonic
    \* H_CurrentTermAtLeastAsLargeAsLogTermsForPrimary
    \* H_CurrentTermAtLeastAsLargeAsLogTerms
    \* H_VotesCantBeGrantedTwiceToCandidatesInSameTerm
    \* H_PrimaryHasEntriesItCreated
    \* H_DivergentEntriesInAppendEntriesMsgsForRequestVoteQuorum
    \* H_LeaderHasEntriesCoveredByCommitIndexes

    \* H_LogMatchingInAppendEntriesMsgsLeaders

    \* H_VotedForNodeInTermImpliesNodeSafeAtTerm

    \* H_LogEntryInTermImpliesSafeAtTerm
    \* H_LogEntryInTermImpliesSafeAtTermAppendEntries

    \* H_LogEntryInTermImpliesSafeAtTermCandidate

    \* H_LogsLaterThanCommittedMustHaveCommitted

    \* H_LogEntryInTermImpliesSafeAtTermCandidateAppendEntries

    \* H_NoLogDivergenceAppendEntries

    \* H_RequestVoteRequestFromNodeImpliesSafeAtTerm

    \* H_NodesVotedInQuorumInTermImpliesNoAppendEntriesRequestsInTerm

    \* H_CandidateVotesGrantedInTermAreUnique
    \* H_CandidateWithVotesGrantedInTermImplyVotersSafeAtTerm
    \* H_CandidateWithVotesGrantedInTermImplyNoOtherLogsInTerm

    \* H_CandidateWithVotesGrantedInTermImplyNoAppendEntryLogsInTerm
    \* H_RequestVoteQuorumInTermImpliesNoAppendEntryLogsInTerm
    \* H_RequestVoteQuorumInTermImpliesNoOtherLogsOrLeadersInTerm

    \* H_LogTermsMonotonicAppendEntries
    \* H_CurrentTermAtLeastAsLargeAsLogTerms

    \* H_AppendEntriesRequestLogTermsNoGreaterThanSenderTerm
    \* H_LogMatching
    \* H_LogMatchingBetweenAppendEntriesMsgs
    \* H_VoteGrantedImpliesVoteResponseMsgConsistent

    \* H_LogEntryInTermDisablesEarlierCommits
    \* H_CommitIndexAtEntryImpliesExistsOnQuorum


    \* H_RequestVoteQuorumInTermImpliesNoOtherLeadersInTerm

    \* H_CandidateWithVotesGrantedImpliesNoAppendEntriesInTerm
    \* H_CandidateInTermVotedForItself

    \* H_LogEntryInTermImpliesSafeAtTermCandidate

    \* H_QuorumsSafeAtTerms
    \* H_LogEntryInTermImpliesSafeAtTerm
    \* H_LogEntryInTermImpliesSafeAtTermAppendEntries
    
    \* H_RequestVoteResponseTermsMatchSource

    \* H_PrimaryHasEntriesItCreatedAppendEntries

    \* H_CommitIndexBoundValid


    \* H_AppendEntriesNeverSentToSelf
    \* H_RequestVotesNeverSentToSelf

    \* H_AppendEntriesRequestLogEntriesMustBeInLeaderLog
    \* H_LeaderMatchIndexValidAppendEntries
    \* H_CandidateWithVotesGrantedInTermImplyVotersSafeAtTerm
    \* H_LeaderMatchIndexBound
    \* H_LeaderMatchIndexValid
    \* H_CommitIndexCoversEntryImpliesExistsOnQuorum

    \* H_VoteInGrantedImpliesVotedFor
    \* H_AppendEntriesRequestInTermImpliesSafeAtTerms
    \* H_AppendEntriesResponseInTermImpliesSafeAtTerms
    \* H_NodesVotedInQuorumInTermImpliesNoAppendEntriesRequestsInTerm
    \* \* H_RequestVoteQuorumInTermImpliesNoAppendEntriesRequestsInTerm
    \* H_RequestVoteResponseTermsMatchSource
    \* H_CandidateWithVotesGrantedInTermImplyVotersSafeAtTerm

    \* May need to double check that this actually holds.
    \* H_CommitIndexInAppendEntriesImpliesCommittedEntryExists
    \* H_LogMatchingInAppendEntriesMsgs
    \* H_LogMatchingBetweenAppendEntriesMsgs
    \* H_AppendEntriesRequestInTermImpliesSafeAtTerms
    \* H_SuccessfulRequestVoteQuorumInTermImpliesNoLogsInTerm

    \* H_DivergentEntriesInAppendEntriesMsgs

    \* H_AppendEntriesCommitIndexCannotBeLargerThanTheSender

    \* H_LeaderHasEntriesCoveredByCommitIndexes
    \* L1

    \* H_RequestVoteRequestFromNodeInTermImpliesVotedForSelf



\* INVARIANT TestInv
\* PROPERTY TestInv

\* LeaderHasAllAckedValues
\* NoLogDivergence
